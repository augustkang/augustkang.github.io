<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-aws/vpc-dns-configuration" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Default DNS Configuration of VPC(DHCP Options Set) | augustkang</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://augustkang.com/img/august.png"><meta data-rh="true" name="twitter:image" content="https://augustkang.com/img/august.png"><meta data-rh="true" property="og:url" content="https://augustkang.com/aws/vpc-dns-configuration"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="augustkang, blog, devops, sre, cloud"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Default DNS Configuration of VPC(DHCP Options Set) | augustkang"><meta data-rh="true" name="description" content="깡통 EC2 인스턴스 기본 설정을 살펴보다가 /etc/resolv.conf 에 10.101.1.2 라는 ip가 nameserver로 설정되어 있는걸 보고"><meta data-rh="true" property="og:description" content="깡통 EC2 인스턴스 기본 설정을 살펴보다가 /etc/resolv.conf 에 10.101.1.2 라는 ip가 nameserver로 설정되어 있는걸 보고"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://augustkang.com/aws/vpc-dns-configuration"><link data-rh="true" rel="alternate" href="https://augustkang.com/aws/vpc-dns-configuration" hreflang="en"><link data-rh="true" rel="alternate" href="https://augustkang.com/aws/vpc-dns-configuration" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-KQH8MPENXW","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script><link rel="stylesheet" href="/assets/css/styles.75314c4a.css">
<link rel="preload" href="/assets/js/runtime~main.80d57011.js" as="script">
<link rel="preload" href="/assets/js/main.5f1e69ea.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(e){}return e}()||function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?e("light"):e("dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/august.png" alt="" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/august.png" alt="" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">augustkang</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/augustkang.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://linkedin.com/in/augustkang" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">augustkang</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/aws/cloudfront-tls-certificate">aws</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aws/cloudfront-tls-certificate">CloudFront Certificate Region</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aws/s3-glacier-flexible-retrieval-storage-class">S3 Glacier Flexible Retrieval storage class의 개념과 사용법</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/aws/vpc-dns-configuration">Default DNS Configuration of VPC(DHCP Options Set)</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/book/books-i-read-2019">book</a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">aws</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Default DNS Configuration of VPC(DHCP Options Set)</span><meta itemprop="position" content="2"></li></ul></nav><div class="theme-doc-markdown markdown"><header><h1>Default DNS Configuration of VPC(DHCP Options Set)</h1></header><p>깡통 EC2 인스턴스 기본 설정을 살펴보다가 <code>/etc/resolv.conf</code> 에 <code>10.101.1.2</code> 라는 ip가 nameserver로 설정되어 있는걸 보고
&quot;이게 뭘까 난 이런걸 넣어주질 않았는데. AWS가 넣어줄텐데 이걸 뭐라 하나&quot; 같은 생각이 들었습니다.</p><p>궁금해서 한참을 찾아봤습니다. 너무 당연하게 모르면서도 궁금해하지 않고 지나갔던 것 같습니다..;</p><p>관련해서 검색을 하다가 DHCP Options Set 이라는 공식 문서에서 설명을 찾을 수 있었습니다.</p><p><a href="https://docs.aws.amazon.com/vpc/latest/userguide/VPC_DHCP_Options.html#AmazonDNS" target="_blank" rel="noopener noreferrer">공식 문서</a>에 의하면 우리가 VPC를 생성하면 자동으로 DHCP Options Set이 같이 생성되고 우리가 만든 VPC와 연결된다고 합니다.</p><p>이 DHCP Options Set이 VPC 내에서 필요한 설정 정보(DNS 서버, NTP, NETBIOS 등)를 전달받을 수 있게 해준다고 합니다.
(VPC 생성할때 같이 생성되는 DHCP Options Set에는 Domain name과 Domain name servers 만 기본으로 들어가있음)</p><p>제가 궁금했던/etc/resolv.conf 에 있던 IP에 대한 내용도 해당 문서의 AmazonDNS 항목에 나와 있습니다.</p><blockquote><p>AmazonProvidedDNS is an Amazon Route 53 Resolver server, and this option enables DNS for instances that need to communicate over the VPC&#x27;s internet gateway.
The string AmazonProvidedDNS maps to a DNS server running on a reserved IP address at the base of the VPC IPv4 network range, plus two.
For example, the DNS Server on a 10.0.0.0/16 network is located at 10.0.0.2.
For VPCs with multiple IPv4 CIDR blocks, the DNS server IP address is located in the primary CIDR block.
The DNS server does not reside within a specific subnet or Availability Zone in a VPC </p></blockquote><p>DHCP Options Set 항목 중 제공되는 <em>AmazonProvidedDNS</em> 라는 항목이 AWS에서(Route53) VPC에 제공해주는 DNS 서버의 IP이고(VPC의 CIDR에서 +2 한 ip를 써서 제공)
이 DNS 서버 제공 덕분에 ec2에서 dns 질의를 할 수 있게 된다는 내용입니다.</p><p>(Route53 콘솔에서 보면 Resolver항목에 Internet Resolver들이 VPC와 연결된 것을 볼 수 있는데, VPC 생성할때 여기에 자동으로 규칙이 생성되는 걸 볼 수 있어요!) </p><p>저는 정말 모르는게 너무 많은 것 같아요. 열심히 공부해야겠습니다!</p><p>참고 :</p><ul><li>[1]<!-- --> DHCP Options Sets - <a href="https://docs.aws.amazon.com/vpc/latest/userguide/VPC_DHCP_Options.html" target="_blank" rel="noopener noreferrer">https://docs.aws.amazon.com/vpc/latest/userguide/VPC_DHCP_Options.html</a></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-10-22T11:30:30.000Z">Oct 22, 2023</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/aws/s3-glacier-flexible-retrieval-storage-class"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">S3 Glacier Flexible Retrieval storage class의 개념과 사용법</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/book/books-i-read-2019"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">2019 Books I Read</div></a></nav></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 augustkang</div></div></div></footer></div>
<script src="/assets/js/runtime~main.80d57011.js"></script>
<script src="/assets/js/main.5f1e69ea.js"></script>
</body>
</html>